<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WinMerge File Compare Report</title>
<style type="text/css">
<!--
table {margin: 0; border: 1px solid #a0a0a0; box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.15);}
td,th {word-break: break-all; font-size: 12pt;padding: 0 3px;}
tr { vertical-align: top; }
.title {color: white; background-color: blue; vertical-align: top; padding: 4px 4px; background: linear-gradient(mediumblue, darkblue);}
.sf3b2 {color: #000000; background-color: #ffffff; }
.sf3b5 {color: #000000; background-color: #0078d7; }
.sf3b14 {color: #000000; background-color: #ffa0a0; }
.sf3b16 {color: #000000; background-color: #f1e2ad; }
.sf3b18 {color: #000000; background-color: #ffaa82; }
.sf3b19 {color: #000000; background-color: #c8816c; }
.sf6b2 {color: #ffffff; background-color: #ffffff; }
.sf6b5 {color: #ffffff; background-color: #0078d7; }
.sf6b14 {color: #ffffff; background-color: #ffa0a0; }
.sf6b16 {color: #ffffff; background-color: #f1e2ad; }
.sf6b18 {color: #ffffff; background-color: #ffaa82; }
.sf6b19 {color: #ffffff; background-color: #c8816c; }
.sf7b2 {color: #0000ff; background-color: #ffffff; font-weight: bold; }
.sf7b5 {color: #0000ff; background-color: #0078d7; font-weight: bold; }
.sf7b14 {color: #0000ff; background-color: #ffa0a0; font-weight: bold; }
.sf7b16 {color: #0000ff; background-color: #f1e2ad; font-weight: bold; }
.sf7b18 {color: #0000ff; background-color: #ffaa82; font-weight: bold; }
.sf7b19 {color: #0000ff; background-color: #c8816c; font-weight: bold; }
.sf8b2 {color: #800080; background-color: #ffffff; }
.sf8b5 {color: #800080; background-color: #0078d7; }
.sf8b14 {color: #800080; background-color: #ffa0a0; }
.sf8b16 {color: #800080; background-color: #f1e2ad; }
.sf8b18 {color: #800080; background-color: #ffaa82; }
.sf8b19 {color: #800080; background-color: #c8816c; }
.sf9b2 {color: #008000; background-color: #ffffff; }
.sf9b5 {color: #008000; background-color: #0078d7; }
.sf9b14 {color: #008000; background-color: #ffa0a0; }
.sf9b16 {color: #008000; background-color: #f1e2ad; }
.sf9b18 {color: #008000; background-color: #ffaa82; }
.sf9b19 {color: #008000; background-color: #c8816c; }
.sf10b2 {color: #ff0000; background-color: #ffffff; }
.sf10b5 {color: #ff0000; background-color: #0078d7; }
.sf10b14 {color: #ff0000; background-color: #ffa0a0; }
.sf10b16 {color: #ff0000; background-color: #f1e2ad; }
.sf10b18 {color: #ff0000; background-color: #ffaa82; }
.sf10b19 {color: #ff0000; background-color: #c8816c; }
.sf11b2 {color: #606060; background-color: #ffffff; }
.sf11b5 {color: #606060; background-color: #0078d7; }
.sf11b14 {color: #606060; background-color: #ffa0a0; }
.sf11b16 {color: #606060; background-color: #f1e2ad; }
.sf11b18 {color: #606060; background-color: #ffaa82; }
.sf11b19 {color: #606060; background-color: #c8816c; }
.sf12b2 {color: #800000; background-color: #ffffff; }
.sf12b5 {color: #800000; background-color: #0078d7; }
.sf12b14 {color: #800000; background-color: #ffa0a0; }
.sf12b16 {color: #800000; background-color: #f1e2ad; }
.sf12b18 {color: #800000; background-color: #ffaa82; }
.sf12b19 {color: #800000; background-color: #c8816c; }
.sf13b2 {color: #0080c0; background-color: #ffffff; }
.sf13b5 {color: #0080c0; background-color: #0078d7; }
.sf13b14 {color: #0080c0; background-color: #ffa0a0; }
.sf13b16 {color: #0080c0; background-color: #f1e2ad; }
.sf13b18 {color: #0080c0; background-color: #ffaa82; }
.sf13b19 {color: #0080c0; background-color: #c8816c; }
.sf15b2 {color: #000000; background-color: #ffffff; }
.sf15b5 {color: #000000; background-color: #0078d7; }
.sf15b14 {color: #000000; background-color: #ffa0a0; }
.sf15b16 {color: #000000; background-color: #f1e2ad; }
.sf15b18 {color: #000000; background-color: #ffaa82; }
.sf15b19 {color: #000000; background-color: #c8816c; }
.sf17b2 {color: #000000; background-color: #ffffff; }
.sf17b5 {color: #000000; background-color: #0078d7; }
.sf17b14 {color: #000000; background-color: #ffa0a0; }
.sf17b16 {color: #000000; background-color: #f1e2ad; }
.sf17b18 {color: #000000; background-color: #ffaa82; }
.sf17b19 {color: #000000; background-color: #c8816c; }
.sf20b2 {color: #000080; background-color: #ffffff; }
.sf20b5 {color: #000080; background-color: #0078d7; }
.sf20b14 {color: #000080; background-color: #ffa0a0; }
.sf20b16 {color: #000080; background-color: #f1e2ad; }
.sf20b18 {color: #000080; background-color: #ffaa82; }
.sf20b19 {color: #000080; background-color: #c8816c; }
.sf21b2 {color: #0080c0; background-color: #ffffff; }
.sf21b5 {color: #0080c0; background-color: #0078d7; }
.sf21b14 {color: #0080c0; background-color: #ffa0a0; }
.sf21b16 {color: #0080c0; background-color: #f1e2ad; }
.sf21b18 {color: #0080c0; background-color: #ffaa82; }
.sf21b19 {color: #0080c0; background-color: #c8816c; }
.sf3b2i {color: #ababab; background-color: #ffffff; }
.sf3b5i {color: #005190; background-color: #0078d7; }
.sf3b14i {color: #ab6b6b; background-color: #ffa0a0; }
.sf3b16i {color: #a19774; background-color: #f1e2ad; }
.sf3b18i {color: #ab7257; background-color: #ffaa82; }
.sf3b19i {color: #865749; background-color: #c8816c; }
.sf6b2i {color: #ffffff; background-color: #ffffff; }
.sf6b5i {color: #54a4e4; background-color: #0078d7; }
.sf6b14i {color: #ffbfbf; background-color: #ffa0a0; }
.sf6b16i {color: #f5ebc8; background-color: #f1e2ad; }
.sf6b18i {color: #ffc6ab; background-color: #ffaa82; }
.sf6b19i {color: #daaa9c; background-color: #c8816c; }
.sf7b2i {color: #ababff; background-color: #ffffff; font-weight: bold; }
.sf7b5i {color: #0051e4; background-color: #0078d7; font-weight: bold; }
.sf7b14i {color: #ab6bbf; background-color: #ffa0a0; font-weight: bold; }
.sf7b16i {color: #a197c8; background-color: #f1e2ad; font-weight: bold; }
.sf7b18i {color: #ab72ab; background-color: #ffaa82; font-weight: bold; }
.sf7b19i {color: #86579c; background-color: #c8816c; font-weight: bold; }
.sf8b2i {color: #d5abd5; background-color: #ffffff; }
.sf8b5i {color: #2a51bb; background-color: #0078d7; }
.sf8b14i {color: #d56b96; background-color: #ffa0a0; }
.sf8b16i {color: #cc979f; background-color: #f1e2ad; }
.sf8b18i {color: #d57282; background-color: #ffaa82; }
.sf8b19i {color: #b15772; background-color: #c8816c; }
.sf9b2i {color: #abd5ab; background-color: #ffffff; }
.sf9b5i {color: #007a90; background-color: #0078d7; }
.sf9b14i {color: #ab966b; background-color: #ffa0a0; }
.sf9b16i {color: #a1c274; background-color: #f1e2ad; }
.sf9b18i {color: #ab9d57; background-color: #ffaa82; }
.sf9b19i {color: #868149; background-color: #c8816c; }
.sf10b2i {color: #ffabab; background-color: #ffffff; }
.sf10b5i {color: #545190; background-color: #0078d7; }
.sf10b14i {color: #ff6b6b; background-color: #ffa0a0; }
.sf10b16i {color: #f59774; background-color: #f1e2ad; }
.sf10b18i {color: #ff7257; background-color: #ffaa82; }
.sf10b19i {color: #da5749; background-color: #c8816c; }
.sf11b2i {color: #cbcbcb; background-color: #ffffff; }
.sf11b5i {color: #1f71b0; background-color: #0078d7; }
.sf11b14i {color: #cb8b8b; background-color: #ffa0a0; }
.sf11b16i {color: #c1b794; background-color: #f1e2ad; }
.sf11b18i {color: #cb9277; background-color: #ffaa82; }
.sf11b19i {color: #a67769; background-color: #c8816c; }
.sf12b2i {color: #d5abab; background-color: #ffffff; }
.sf12b5i {color: #2a5190; background-color: #0078d7; }
.sf12b14i {color: #d56b6b; background-color: #ffa0a0; }
.sf12b16i {color: #cc9774; background-color: #f1e2ad; }
.sf12b18i {color: #d57257; background-color: #ffaa82; }
.sf12b19i {color: #b15749; background-color: #c8816c; }
.sf13b2i {color: #abd5eb; background-color: #ffffff; }
.sf13b5i {color: #007ad0; background-color: #0078d7; }
.sf13b14i {color: #ab96aa; background-color: #ffa0a0; }
.sf13b16i {color: #a1c2b3; background-color: #f1e2ad; }
.sf13b18i {color: #ab9d96; background-color: #ffaa82; }
.sf13b19i {color: #868187; background-color: #c8816c; }
.sf15b2i {color: #ababab; background-color: #ffffff; }
.sf15b5i {color: #005190; background-color: #0078d7; }
.sf15b14i {color: #ab6b6b; background-color: #ffa0a0; }
.sf15b16i {color: #a19774; background-color: #f1e2ad; }
.sf15b18i {color: #ab7257; background-color: #ffaa82; }
.sf15b19i {color: #865749; background-color: #c8816c; }
.sf17b2i {color: #ababab; background-color: #ffffff; }
.sf17b5i {color: #005190; background-color: #0078d7; }
.sf17b14i {color: #ab6b6b; background-color: #ffa0a0; }
.sf17b16i {color: #a19774; background-color: #f1e2ad; }
.sf17b18i {color: #ab7257; background-color: #ffaa82; }
.sf17b19i {color: #865749; background-color: #c8816c; }
.sf20b2i {color: #ababd5; background-color: #ffffff; }
.sf20b5i {color: #0051bb; background-color: #0078d7; }
.sf20b14i {color: #ab6b96; background-color: #ffa0a0; }
.sf20b16i {color: #a1979f; background-color: #f1e2ad; }
.sf20b18i {color: #ab7282; background-color: #ffaa82; }
.sf20b19i {color: #865772; background-color: #c8816c; }
.sf21b2i {color: #abd5eb; background-color: #ffffff; }
.sf21b5i {color: #007ad0; background-color: #0078d7; }
.sf21b14i {color: #ab96aa; background-color: #ffa0a0; }
.sf21b16i {color: #a1c2b3; background-color: #f1e2ad; }
.sf21b18i {color: #ab9d96; background-color: #ffaa82; }
.sf21b19i {color: #868187; background-color: #c8816c; }
.ln {text-align: right; word-break: normal; color: #000000; background-color: #f0f0f0;}
-->
</style>
</head>
<body>
<table cellspacing="0" cellpadding="0" style="width:100%;">
<thead>
<tr>
<th colspan="2" class="title" style="width:50.000000%">C:\Users\小马\test\learn\featureExtraction.cpp</th>
<th colspan="2" class="title" style="width:50.000000%">C:\Users\小马\test\src\featureExtraction.cpp</th>
</tr>
</thead>
<tbody>
<tr>
<td class="ln"><a name="d1" href="#d1">1</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/</span><span class="sf17b16">**************************************<wbr>*********** </span>&nbsp;</code></td>
<td class="ln">1</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">#include "..</span><span style="color: #000000; background-color: #efcb05; ">/</span><span class="sf17b16">include/utility.h"</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">2</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">GitHub:</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">https:</span><span style="color: #000000; background-color: #efcb05; ">/</span><span class="sf17b16">/github</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">com/smilefacehh/LIO-SAM-<wbr>DetailedNote</span>&nbsp;</code></td>
<td class="ln">2</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">#include</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">"slio_sam</span><span style="color: #000000; background-color: #efcb05; ">/</span><span class="sf17b16">cloud_info</span><span style="color: #000000; background-color: #efcb05; ">.</span><span class="sf17b16">h"</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">3</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">Author:</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">lutao2014@163.com</span>&nbsp;</code></td>
<td class="ln">3</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">#define</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b16">PROCESS 0</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">4</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">Date: 2021-02-21 </span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">5</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">---------------------------------------<wbr>-----------</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">6</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">功能简介:</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">7</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; 对经过运动畸变校正之后的当前帧激光点云，计算每个点的曲率，进而提取角点、平面点<wbr>（用曲率的大小进行判定）。</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">8</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">9</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">订阅：</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">10</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; 1、订阅当前激光帧运动畸变校正后的点云信息，来自ImageProjection<wbr>。</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">11</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">12</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">发布：</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">13</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; 1、发布当前激光帧提取特征之后的点云信息，包括的历史数据有：运动畸变校正，点云<wbr>数据，初始位姿，姿态角，有效点云数据，角点点云，平面点点云等，发布给MapOp<wbr>timization；</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">14</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; 2、发布当前激光帧提取的角点点云，用于rviz展示；</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">15</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; 3、发布当前激光帧提取的平面点点云，用于rviz展示。</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">16</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">***************************************<wbr>***********/ &nbsp;</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">17</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">#include "utility.h"</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">18</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">#include "lio_sam/cloud_info.h"</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">19</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">20</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">/**</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">21</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp;* 激光点曲率</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">22</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">*/</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">23</td><td class="sf3b2"><code><span class="sf7b2">struct</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">smoothness_t</span><span class="sf11b2">{ </span></code></td>
<td class="ln">4</td><td class="sf3b2"><code><span class="sf7b2">struct</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">smoothness_t</span><span class="sf11b2">{ </span></code></td>
</tr>
<tr>
<td class="ln"><a name="d2" href="#d2">24</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">float</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">value</span><span style="color: #000000; background-color: #efcb05; ">;</span><span class="sf17b18">&nbsp;// 曲率值</span>&nbsp;</code></td>
<td class="ln">5</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">float</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">value</span><span style="color: #000000; background-color: #efcb05; ">;</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">25</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">size_t</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">;</span><span class="sf17b18">&nbsp; // 激光点一维索引</span>&nbsp;</code></td>
<td class="ln">6</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">size_t</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">;</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">26</td><td class="sf3b2"><code><span class="sf11b2">};</span></code></td>
<td class="ln">7</td><td class="sf3b2"><code><span class="sf11b2">};</span></code></td>
</tr>
<tr>
<td class="ln">27</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">8</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d3" href="#d3">28</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">/**</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">29</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp;* 曲率比较函数，从小到大排序</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">30</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">*/</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">31</td><td class="sf3b2"><code><span class="sf7b2">struct</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">by_value</span><span class="sf11b2">{ </span></code></td>
<td class="ln">9</td><td class="sf3b2"><code><span class="sf7b2">struct</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">by_value</span><span class="sf11b2">{ </span></code></td>
</tr>
<tr>
<td class="ln">32</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">bool</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">operator</span><span class="sf11b2">()(</span><span class="sf3b2">smoothness_t</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">const</span><span class="sf11b2">&nbsp;&amp;</span><span class="sf3b2">left</span><span class="sf11b2">, </span><span class="sf3b2">smoothness_t</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">const</span><span class="sf11b2">&nbsp;&amp;</span><span class="sf3b2">right</span><span class="sf11b2">) { </span></code></td>
<td class="ln">10</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">bool</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">operator</span><span class="sf11b2">()(</span><span class="sf3b2">smoothness_t</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">const</span><span class="sf11b2">&nbsp;&amp;</span><span class="sf3b2">left</span><span class="sf11b2">, </span><span class="sf3b2">smoothness_t</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">const</span><span class="sf11b2">&nbsp;&amp;</span><span class="sf3b2">right</span><span class="sf11b2">) { </span></code></td>
</tr>
<tr>
<td class="ln">33</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">left</span><span class="sf11b2">.</span><span class="sf3b2">value</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">right</span><span class="sf11b2">.</span><span class="sf3b2">value</span><span class="sf11b2">;</span></code></td>
<td class="ln">11</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">left</span><span class="sf11b2">.</span><span class="sf3b2">value</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">right</span><span class="sf11b2">.</span><span class="sf3b2">value</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">34</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">12</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">35</td><td class="sf3b2"><code><span class="sf11b2">};</span></code></td>
<td class="ln">13</td><td class="sf3b2"><code><span class="sf11b2">};</span></code></td>
</tr>
<tr>
<td class="ln">36</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">14</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">37</td><td class="sf3b2"><code><span class="sf7b2">class</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">FeatureExtraction</span><span class="sf11b2">&nbsp;: </span><span class="sf7b2">public</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ParamServer</span></code></td>
<td class="ln">15</td><td class="sf3b2"><code><span class="sf7b2">class</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">FeatureExtraction</span><span class="sf11b2">&nbsp;: </span><span class="sf7b2">public</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ParamServer</span></code></td>
</tr>
<tr>
<td class="ln">38</td><td class="sf3b2"><code><span class="sf11b2">{</span></code></td>
<td class="ln">16</td><td class="sf3b2"><code><span class="sf11b2">{</span></code></td>
</tr>
<tr>
<td class="ln">39</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">17</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">40</td><td class="sf3b2"><code><span class="sf7b2">public</span><span class="sf11b2">:</span></code></td>
<td class="ln">18</td><td class="sf3b2"><code><span class="sf7b2">public</span><span class="sf11b2">:</span></code></td>
</tr>
<tr>
<td class="ln">41</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">19</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">42</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Subscriber</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">subLaserCloudInfo</span><span class="sf11b2">;</span></code></td>
<td class="ln">20</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Subscriber</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">subLaserCloudInfo</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">43</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">21</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d4" href="#d4">44</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 发布当前激光帧提取特征之后的点云信息</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">45</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Publisher</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pubLaserCloudInfo</span><span class="sf11b2">;</span></code></td>
<td class="ln">22</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Publisher</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pubLaserCloudInfo</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d5" href="#d5">46</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 发布当前激光帧提取的角点点云</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">47</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Publisher</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pubCornerPoints</span><span class="sf11b2">;</span></code></td>
<td class="ln">23</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Publisher</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pubCornerPoints</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d6" href="#d6">48</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 发布当前激光帧提取的平面点点云</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">49</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Publisher</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pubSurfacePoints</span><span class="sf11b2">;</span></code></td>
<td class="ln">24</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf3b2">Publisher</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pubSurfacePoints</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">50</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">25</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d7" href="#d7">51</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 当前激光帧运动畸变校正后的有效点云</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">52</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">extractedCloud</span><span class="sf11b2">;</span></code></td>
<td class="ln">26</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">extractedCloud</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d8" href="#d8">53</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 当前激光帧角点点云集合</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">54</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cornerCloud</span><span class="sf11b2">;</span></code></td>
<td class="ln">27</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cornerCloud</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d9" href="#d9">55</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 当前激光帧平面点点云集合</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">56</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">;</span></code></td>
<td class="ln">28</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">57</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">29</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">58</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">VoxelGrid</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt; </span><span class="sf3b2">downSizeFilter</span><span class="sf11b2">;</span></code></td>
<td class="ln">30</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">VoxelGrid</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt; </span><span class="sf3b2">downSizeFilter</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">59</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">31</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d10" href="#d10">60</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b16">// 当前激光帧点云信息，包括的历史数据有：运动畸变校正，点云数据，初始位姿，姿态角<wbr>，有效点云数据，角点点云，平面点点云等</span>&nbsp;</code></td>
<td class="ln">32</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b16">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_info</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">;</span></code></td>
</tr>
<tr>
<td class="ln">61</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_info</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">;</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">62</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">std_msgs</span><span class="sf11b2">::</span><span class="sf3b2">Header</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cloudHeader</span><span class="sf11b2">;</span></code></td>
<td class="ln">33</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">std_msgs</span><span class="sf11b2">::</span><span class="sf3b2">Header</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cloudHeader</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">63</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">34</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d11" href="#d11">64</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 当前激光帧点云的曲率</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">65</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf3b2">vector</span><span class="sf11b2">&lt;</span><span class="sf3b2">smoothness_t</span><span class="sf11b2">&gt; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">;</span></code></td>
<td class="ln">35</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf3b2">vector</span><span class="sf11b2">&lt;</span><span class="sf3b2">smoothness_t</span><span class="sf11b2">&gt; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">66</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;*</span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">;</span></code></td>
<td class="ln">36</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;*</span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d12" href="#d12">67</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 特征提取标记，1表示遮挡、平行，或者已经进行特征提取的点，0表示还未进行特征提<wbr>取处理</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">68</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;*</span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">;</span></code></td>
<td class="ln">37</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;*</span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d13" href="#d13">69</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 1表示角点，-1表示平面点</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">70</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;*</span><span class="sf3b2">cloudLabel</span><span class="sf11b2">;</span></code></td>
<td class="ln">38</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;*</span><span class="sf3b2">cloudLabel</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">71</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">39</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d14" href="#d14">72</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/**</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">73</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 构造函数</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">74</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">75</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf8b2">FeatureExtraction</span><span class="sf11b2">()</span></code></td>
<td class="ln">40</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf8b2">FeatureExtraction</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln">76</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">41</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d15" href="#d15">77</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;订阅当前激光帧运动畸变校正后的点云信息</span>&nbsp;</code></td>
<td class="ln">42</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">ROS_INFO("FeatureExtraction:");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">78</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">subLaserCloudInfo</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">subscribe</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_info</span><span style="color: #000000; background-color: #efcb05; ">&gt;(</span><span style="color: #000000; background-color: #efcb05; ">"</span><span style="color: #000000; background-color: #efcb05; ">lio_<wbr>sam/deskew/cloud_info"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">, &amp;</span><span style="color: #000000; background-color: #efcb05; ">FeatureExtraction</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">laserCloudInfoHandl<wbr>er</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">this</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">ros</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">TransportHints</span><span style="color: #000000; background-color: #efcb05; ">().</span><span style="color: #000000; background-color: #efcb05; ">tcpNoDelay</span><span style="color: #000000; background-color: #efcb05; ">());</span></code></td>
<td class="ln">43</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">subLaserCloudInfo</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">subscribe</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_info</span><span style="color: #000000; background-color: #efcb05; ">&gt;(</span><span style="color: #000000; background-color: #efcb05; ">"</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">li<wbr>o_sam/deskew/cloud_info"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">, &amp;</span><span style="color: #000000; background-color: #efcb05; ">FeatureExtraction</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">laserCloudInfoHandl<wbr>er</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">this</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">ros</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">TransportHints</span><span style="color: #000000; background-color: #efcb05; ">().</span><span style="color: #000000; background-color: #efcb05; ">tcpNoDelay</span><span style="color: #000000; background-color: #efcb05; ">());</span></code></td>
</tr>
<tr>
<td class="ln">79</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">44</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d16" href="#d16">80</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 发布当前激光帧提取特征之后的点云信息</span>&nbsp;</code></td>
<td class="ln">45</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pubLaserCloudInfo</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">advertise</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_info</span><span style="color: #000000; background-color: #efcb05; ">&gt; (</span><span style="color: #000000; background-color: #efcb05; ">"</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam/feature/cloud_info"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
</tr>
<tr>
<td class="ln">81</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pubLaserCloudInfo</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">advertise</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_info</span><span style="color: #000000; background-color: #efcb05; ">&gt; (</span><span style="color: #000000; background-color: #efcb05; ">"</span><span style="color: #000000; background-color: #efcb05; ">lio_sam/feature/cloud_info"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
<td class="ln">46</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pubCornerPoints</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">advertise</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span style="color: #000000; background-color: #efcb05; ">sensor_msgs</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">PointCloud2</span><span style="color: #000000; background-color: #efcb05; ">&gt;(<wbr></span><span style="color: #000000; background-color: #efcb05; ">"</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam/feature/cloud_corner"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
</tr>
<tr>
<td class="ln">82</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 发布当前激光帧的角点点云</span>&nbsp;</code></td>
<td class="ln">47</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pubSurfacePoints</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">advertise</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span style="color: #000000; background-color: #efcb05; ">sensor_msgs</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">PointCloud2</span><span style="color: #000000; background-color: #efcb05; ">&gt;(<wbr></span><span style="color: #000000; background-color: #efcb05; ">"</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam/feature/cloud_surface"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
</tr>
<tr>
<td class="ln">83</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pubCornerPoints</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">advertise</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span style="color: #000000; background-color: #efcb05; ">sensor_msgs</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">PointCloud2</span><span style="color: #000000; background-color: #efcb05; ">&gt;(<wbr></span><span style="color: #000000; background-color: #efcb05; ">"</span><span style="color: #000000; background-color: #efcb05; ">lio_sam/feature/cloud_corner"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
<td class="ln">48</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">ROS_INFO("initializationValue");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">84</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 发布当前激光帧的面点点云</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">85</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pubSurfacePoints</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">nh</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">advertise</span><span style="color: #000000; background-color: #efcb05; ">&lt;</span><span style="color: #000000; background-color: #efcb05; ">sensor_msgs</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">PointCloud2</span><span style="color: #000000; background-color: #efcb05; ">&gt;(<wbr></span><span style="color: #000000; background-color: #efcb05; ">"</span><span style="color: #000000; background-color: #efcb05; ">lio_sam/feature/cloud_surface"</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">86</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">87</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;初始化</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">88</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">initializationValue</span><span class="sf11b2">();</span></code></td>
<td class="ln">49</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">initializationValue</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">89</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">50</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">90</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">51</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d17" href="#d17">91</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 初始化</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">92</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">initializationValue</span><span class="sf11b2">()</span></code></td>
<td class="ln">52</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">initializationValue</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln">93</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">53</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d18" href="#d18">.</a></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">54</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//ROS_INFO("initializationValue_start")<wbr>;</span></code></td>
</tr>
<tr>
<td class="ln">94</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">.</span><span class="sf8b2">resize</span><span class="sf11b2">(</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_S<wbr>CAN</span><span class="sf11b2">);</span></code></td>
<td class="ln">55</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">.</span><span class="sf8b2">resize</span><span class="sf11b2">(</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_S<wbr>CAN</span><span class="sf11b2">);</span></code></td>
</tr>
<tr>
<td class="ln">95</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">56</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d19" href="#d19">96</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">downSizeFilter</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">setLeafSize</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">odometrySurf<wbr>LeafSize</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">odometrySurfLeafSize</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">odometrySurfLeafSize</span><span style="color: #000000; background-color: #efcb05; ">);</span>&nbsp;</code></td>
<td class="ln">57</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">downSizeFilter</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">setLeafSize</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">odometrySurf<wbr>LeafSize</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">odometrySurfLeafSize</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">odometrySurfLeafSize</span><span style="color: #000000; background-color: #efcb05; ">);</span><span class="sf17b18">//降采样大小</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">97</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">58</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">98</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">extractedCloud</span><span class="sf11b2">.</span><span class="sf8b2">reset</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
<td class="ln">59</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">extractedCloud</span><span class="sf11b2">.</span><span class="sf8b2">reset</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
</tr>
<tr>
<td class="ln">99</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cornerCloud</span><span class="sf11b2">.</span><span class="sf8b2">reset</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
<td class="ln">60</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cornerCloud</span><span class="sf11b2">.</span><span class="sf8b2">reset</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
</tr>
<tr>
<td class="ln">100</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">.</span><span class="sf8b2">reset</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
<td class="ln">61</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">.</span><span class="sf8b2">reset</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
</tr>
<tr>
<td class="ln">101</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">62</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">102</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">&nbsp;= </span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">float</span><span class="sf11b2">[</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_SCAN</span><span class="sf11b2">];</span></code></td>
<td class="ln">63</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">&nbsp;= </span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">float</span><span class="sf11b2">[</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_SCAN</span><span class="sf11b2">];</span></code></td>
</tr>
<tr>
<td class="ln">103</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">&nbsp;= </span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">int</span><span class="sf11b2">[</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_SCAN</span><span class="sf11b2">];</span></code></td>
<td class="ln">64</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">&nbsp;= </span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">int</span><span class="sf11b2">[</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_SCAN</span><span class="sf11b2">];</span></code></td>
</tr>
<tr>
<td class="ln">104</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudLabel</span><span class="sf11b2">&nbsp;= </span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">int</span><span class="sf11b2">[</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_SCAN</span><span class="sf11b2">];</span></code></td>
<td class="ln">65</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudLabel</span><span class="sf11b2">&nbsp;= </span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">int</span><span class="sf11b2">[</span><span class="sf3b2">N_SCAN</span><span class="sf11b2">*</span><span class="sf3b2">Horizon_SCAN</span><span class="sf11b2">];</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d20" href="#d20">.</a></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">66</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//ROS_INFO("initializationValue_end");</span></code></td>
</tr>
<tr>
<td class="ln">105</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">67</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">106</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">68</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d21" href="#d21">107</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">/**</span>&nbsp;</code></td>
<td class="ln">69</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">void</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">laserCloudInfoHandler</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">const</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_infoConstPtr</span><span style="color: #000000; background-color: #efcb05; ">&amp; </span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">)</span></code></td>
</tr>
<tr>
<td class="ln">108</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp;* 订阅当前激光帧运动畸变校正后的点云信息</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">109</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp;* 1、计算当前激光帧点云中每个点的曲率</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">110</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp;* 2、标记属于遮挡、平行两种情况的点，不做特征提取</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">111</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp;* 3、点云角点、平面点特征提取</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">112</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp;* &nbsp; 1) 遍历扫描线，每根扫描线扫描一周的点云划分为6段，针对每段提取20个角点、不限数<wbr>量的平面点，加入角点集合、平面点集合</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">113</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp;* &nbsp; 2) 认为非角点的点都是平面点，加入平面点云集合，最后降采样</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">114</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp;* 4、发布角点、面点点云，发布带特征点云数据的当前激光帧点云信息</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">115</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; */</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">116</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">void</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">laserCloudInfoHandler</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">const</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">lio_sam</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">cloud_infoConstPtr</span><span style="color: #000000; background-color: #efcb05; ">&amp; </span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">117</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">70</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d22" href="#d22">118</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= *</span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">;</span><span class="sf17b16">&nbsp;</span>&nbsp;</code></td>
<td class="ln">71</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= *</span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">;</span><span class="sf17b16">&nbsp;// new cloud info</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">119</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudHeader</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">-&gt;</span><span style="color: #000000; background-color: #efcb05; ">header</span><span style="color: #000000; background-color: #efcb05; ">;</span><span class="sf17b16">&nbsp;</span>&nbsp;</code></td>
<td class="ln">72</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudHeader</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">-&gt;</span><span style="color: #000000; background-color: #efcb05; ">header</span><span style="color: #000000; background-color: #efcb05; ">;</span><span class="sf17b16">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">new cloud header</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">120</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">当前激光帧运动畸变校正后的有效点云</span>&nbsp;</code></td>
<td class="ln">73</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pcl</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">fromROSMsg</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">-&gt;</span><span style="color: #000000; background-color: #efcb05; ">cloud_deskewed</span><span style="color: #000000; background-color: #efcb05; ">, *</span><span style="color: #000000; background-color: #efcb05; ">extractedCloud</span><span style="color: #000000; background-color: #efcb05; ">);</span><span class="sf17b16">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b18">这里相当于单独把它点信息给拿出来了</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">121</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">pcl</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">fromROSMsg</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">msgIn</span><span style="color: #000000; background-color: #efcb05; ">-&gt;</span><span style="color: #000000; background-color: #efcb05; ">cloud_deskewed</span><span style="color: #000000; background-color: #efcb05; ">, *</span><span style="color: #000000; background-color: #efcb05; ">extractedCloud</span><span style="color: #000000; background-color: #efcb05; ">);</span><span class="sf17b16">&nbsp;</span>&nbsp;</code></td>
<td class="ln">74</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; //ROS_INFO("featureExtraction: 去畸变后点数量：%d",extractedCloud-&gt;size());</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">122</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">75</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; //</span><span style="color: #000000; background-color: #efcb05; ">计算</span><span class="sf17b16">曲率</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">123</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span style="color: #000000; background-color: #efcb05; ">计算</span><span class="sf17b16">当前激光帧</span><span style="color: #000000; background-color: #efcb05; ">点云</span><span class="sf17b16">中每个</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">的曲率</span>&nbsp;</code></td>
<td class="ln">76</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; //ROS_INFO("计算曲率\n，去畸变后</span><span style="color: #000000; background-color: #efcb05; ">点云</span><span class="sf17b16">数量:%d,扫描</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">数量:%d<wbr>",extractedCloud-&gt;size(),cloudInfo.poin<wbr>tRange.size());</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">124</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">calculateSmoothness</span><span class="sf11b2">();</span></code></td>
<td class="ln">77</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">calculateSmoothness</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d23" href="#d23">125</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">78</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">异常</span><span style="color: #000000; background-color: #efcb05; ">点</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">126</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">属于遮挡、平行两种情况的</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">，不做特征提取</span>&nbsp;</code></td>
<td class="ln">79</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; //ROS_INFO("记录异常点");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">127</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">markOccludedPoints</span><span class="sf11b2">();</span></code></td>
<td class="ln">80</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">markOccludedPoints</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d24" href="#d24">128</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">81</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">提取特征</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">并且对线</span><span style="color: #000000; background-color: #efcb05; ">特征</span><span class="sf17b16">降采样，这里线特征可以考虑换一个方式，不要直接进行降<wbr>采样，</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">129</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">云角点、平面点</span><span style="color: #000000; background-color: #efcb05; ">特征</span><span class="sf17b16">提取</span>&nbsp;</code></td>
<td class="ln">82</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">能不能换一个方式降采样</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">按</span><span style="color: #000000; background-color: #efcb05; ">线</span><span style="color: #000000; background-color: #efcb05; ">分</span><span class="sf17b16">配特征点</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">有的线长有的线短,让</span><span style="color: #000000; background-color: #efcb05; ">每</span><span style="color: #000000; background-color: #efcb05; ">个</span><span class="sf17b16">线都有均匀<wbr>分布特征</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">。</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">130</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;1、遍历扫描线</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">每根扫描</span><span style="color: #000000; background-color: #efcb05; ">线</span><span class="sf17b18">扫描一周的点云划</span><span style="color: #000000; background-color: #efcb05; ">分</span><span class="sf17b16">为6段</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">针对</span><span style="color: #000000; background-color: #efcb05; ">每</span><span class="sf17b18">段提取20</span><span style="color: #000000; background-color: #efcb05; ">个</span><span class="sf17b16">角</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">、不<wbr>限数量的平面点，加入角点集合、平面点集合</span>&nbsp;</code></td>
<td class="ln">83</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">ROS_INFO("提取特征</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">131</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;2、认为非角</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">的点都是平面点，加入平面点云集合，最后降采样</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">132</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">extractFeatures</span><span class="sf11b2">();</span></code></td>
<td class="ln">84</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">extractFeatures</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d25" href="#d25">133</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span>&nbsp;</code></td>
<td class="ln">85</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">ROS_INFO("</span><span style="color: #000000; background-color: #efcb05; ">发布</span><span style="color: #000000; background-color: #efcb05; ">特征点</span><span class="sf17b16">");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">134</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">发布</span><span class="sf17b18">角点、面点点云，发布带</span><span style="color: #000000; background-color: #efcb05; ">特征点</span><span class="sf17b16">云数据的当前激光帧点云信息</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">135</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">publishFeatureCloud</span><span class="sf11b2">();</span></code></td>
<td class="ln">86</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">publishFeatureCloud</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d26" href="#d26">.</a></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">87</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//ROS_INFO("--------点云预处理-end-------");<wbr></span></code></td>
</tr>
<tr>
<td class="ln">136</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">88</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">137</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">89</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d27" href="#d27">138</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/**</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">139</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 计算当前激光帧点云中每个点的曲率</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">140</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">141</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">calculateSmoothness</span><span class="sf11b2">()</span></code></td>
<td class="ln">90</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">calculateSmoothness</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln">142</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">91</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d28" href="#d28">143</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 遍历当前激光帧运动畸变校正后的有效点云</span>&nbsp;</code></td>
<td class="ln">92</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cloudSize</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">extractedCloud</span><span style="color: #000000; background-color: #efcb05; ">-&gt;</span><span style="color: #000000; background-color: #efcb05; ">points</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">size</span><span style="color: #000000; background-color: #efcb05; ">();</span><span class="sf17b18">//这个是提取后的<wbr>，其位置和原始的点云位置不一样了,不过couldinfo.pointColIn<wbr>d存储了下标</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">144</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cloudSize</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">extractedCloud</span><span style="color: #000000; background-color: #efcb05; ">-&gt;</span><span style="color: #000000; background-color: #efcb05; ">points</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">size</span><span style="color: #000000; background-color: #efcb05; ">();</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">145</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">5</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">cloudSize</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">5</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">++)</span></code></td>
<td class="ln">93</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">5</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">cloudSize</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">5</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">++)</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d29" href="#d29">146</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; {</span>&nbsp;</code></td>
<td class="ln">94</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; {</span><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp;</span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">cout&lt;&lt;"cInfo.Range"&lt;&lt;i&lt;&lt;":"&lt;&lt;cloudInf<wbr>o.</span><span style="color: #000000; background-color: #efcb05; ">pointRange</span><span class="sf17b16">[i]&lt;&lt;endl;</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">147</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp;</span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;用当前激光点前后5个点计算当前点的曲率，平坦位置处曲率较小，角点处曲率较大；这<wbr>个方法很简单但有效 </span><span style="color: #000000; background-color: #efcb05; ">pointRange</span><span class="sf17b16">是指该点到lidar坐标系原点的距离</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">148</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">diffRange</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">5</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">4</span><span class="sf11b2">]</span></code></td>
<td class="ln">95</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">diffRange</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">5</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">4</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln">149</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">3</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">2</span><span class="sf11b2">]</span></code></td>
<td class="ln">96</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">3</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">2</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln">150</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">1</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * </span><span class="sf10b2">10</span></code></td>
<td class="ln">97</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">1</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * </span><span class="sf10b2">10</span></code></td>
</tr>
<tr>
<td class="ln">151</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">2</span><span class="sf11b2">]</span></code></td>
<td class="ln">98</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">2</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln">152</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">3</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">4</span><span class="sf11b2">]</span></code></td>
<td class="ln">99</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">3</span><span class="sf11b2">] + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">4</span><span class="sf11b2">]</span></code></td>
</tr>
<tr>
<td class="ln">153</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">5</span><span class="sf11b2">]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></code></td>
<td class="ln">100</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">5</span><span class="sf11b2">]; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></code></td>
</tr>
<tr>
<td class="ln">154</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">101</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d30" href="#d30">155</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 距离差值平方作为曲率</span>&nbsp;</code></td>
<td class="ln">102</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudCurvature</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">i</span><span style="color: #000000; background-color: #efcb05; ">] = </span><span style="color: #000000; background-color: #efcb05; ">diffRange</span><span style="color: #000000; background-color: #efcb05; ">*</span><span style="color: #000000; background-color: #efcb05; ">diffRange</span><span style="color: #000000; background-color: #efcb05; ">;</span><span class="sf17b16">//diffX * diffX + diffY * diffY + diffZ * diffZ;</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">156</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudCurvature</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">i</span><span style="color: #000000; background-color: #efcb05; ">] = </span><span style="color: #000000; background-color: #efcb05; ">diffRange</span><span style="color: #000000; background-color: #efcb05; ">*</span><span style="color: #000000; background-color: #efcb05; ">diffRange</span><span style="color: #000000; background-color: #efcb05; ">;</span>&nbsp;</code></td>
<td class="ln">103</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // cout&lt;&lt;"cloudCurvature"&lt;&lt;i&lt;&lt;":"&lt;&lt;cloudCu<wbr>rvature[i]&lt;&lt;" ";</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">157</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">158</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
<td class="ln">104</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">159</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudLabel</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
<td class="ln">105</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudLabel</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d31" href="#d31">160</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>&nbsp;</code></td>
<td class="ln">106</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">cloudSmoothness for sorting</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">161</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">存储该点曲率值、激光点一维索引</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">162</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">].</span><span class="sf3b2">value</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">];</span></code></td>
<td class="ln">107</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">].</span><span class="sf3b2">value</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">];</span></code></td>
</tr>
<tr>
<td class="ln">163</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">].</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">i</span><span class="sf11b2">;</span></code></td>
<td class="ln">108</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">].</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">i</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">164</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">109</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">165</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">110</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">166</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">111</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d32" href="#d32">167</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/**</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">168</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 标记属于遮挡、平行两种情况的点，不做特征提取</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">169</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">170</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">markOccludedPoints</span><span class="sf11b2">()</span></code></td>
<td class="ln">112</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">markOccludedPoints</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln">171</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">113</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln">172</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cloudSize</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">extractedCloud</span><span class="sf11b2">-&gt;</span><span class="sf3b2">points</span><span class="sf11b2">.</span><span class="sf8b2">size</span><span class="sf11b2">();</span></code></td>
<td class="ln">114</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">cloudSize</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">extractedCloud</span><span class="sf11b2">-&gt;</span><span class="sf3b2">points</span><span class="sf11b2">.</span><span class="sf8b2">size</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">173</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2">// mark occluded points and parallel beam points</span></code></td>
<td class="ln">115</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf9b2">// mark occluded points and parallel beam points</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d33" href="#d33">174</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">175</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">5</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">cloudSize</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">6</span><span class="sf11b2">; ++</span><span class="sf3b2">i</span><span class="sf11b2">)</span></code></td>
<td class="ln">116</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">5</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">cloudSize</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">6</span><span class="sf11b2">; ++</span><span class="sf3b2">i</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln">176</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">117</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d34" href="#d34">177</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">当前点和下一个点的range值</span>&nbsp;</code></td>
<td class="ln">118</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">occluded points</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">178</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">depth1</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">];</span></code></td>
<td class="ln">119</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">depth1</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">];</span></code></td>
</tr>
<tr>
<td class="ln">179</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">depth2</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1</span><span class="sf11b2">];</span></code></td>
<td class="ln">120</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">depth2</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1</span><span class="sf11b2">];</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d35" href="#d35">180</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;两个激光</span><span style="color: #000000; background-color: #efcb05; ">点之间的</span><span class="sf17b16">一维索引差值</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">如果在一条扫描线</span><span style="color: #000000; background-color: #efcb05; ">上</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">那么值</span><span style="color: #000000; background-color: #efcb05; ">为</span><span class="sf17b18">1；如果两个点之间有<wbr></span><span style="color: #000000; background-color: #efcb05; ">一些无效点</span><span class="sf17b18">被剔除了，可能会比1大，但不会特别大</span>&nbsp;</code></td>
<td class="ln">121</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">获取有效</span><span style="color: #000000; background-color: #efcb05; ">点之间的</span><span class="sf17b16">下标间隔</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">理论</span><span style="color: #000000; background-color: #efcb05; ">上</span><span class="sf17b18">应该是１</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">但是因</span><span style="color: #000000; background-color: #efcb05; ">为</span><span style="color: #000000; background-color: #efcb05; ">一些无效点</span><span style="color: #000000; background-color: #efcb05; ">的</span><span class="sf17b18">存在</span><span style="color: #000000; background-color: #efcb05; ">结</span><span class="sf17b16">果</span><span style="color: #000000; background-color: #efcb05; ">会</span><span style="color: #000000; background-color: #efcb05; ">大<wbr></span><span class="sf17b18">于１</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">181</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 如果恰好前一个点在扫描一周</span><span style="color: #000000; background-color: #efcb05; ">的</span><span style="color: #000000; background-color: #efcb05; ">结</span><span class="sf17b16">束时刻，下一个点是另一条扫描线的起始时刻，那么值<wbr></span><span style="color: #000000; background-color: #efcb05; ">会</span><span class="sf17b18">很</span><span style="color: #000000; background-color: #efcb05; ">大</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">182</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1</span><span class="sf11b2">]<wbr> - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">]));</span></code></td>
<td class="ln">122</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1</span><span class="sf11b2">]<wbr> - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">]));</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d36" href="#d36">183</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">123</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; </span><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span style="color: #000000; background-color: #efcb05; ">如果</span><span class="sf17b16">中间间隔</span><span style="color: #000000; background-color: #efcb05; ">不</span><span class="sf17b16">是很</span><span style="color: #000000; background-color: #efcb05; ">大</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">这里主要是预防两</span><span style="color: #000000; background-color: #efcb05; ">个</span><span class="sf17b18">有效</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">之间无效点过多。</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">184</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b18">&nbsp;两个点在同一扫描线上，且距离相差大于0.3，认为存在遮挡关系（也就是这两个点不<wbr>在同一平面上，</span><span style="color: #000000; background-color: #efcb05; ">如果</span><span class="sf17b16">在同一平面上，距离相差</span><span style="color: #000000; background-color: #efcb05; ">不</span><span class="sf17b16">会太</span><span style="color: #000000; background-color: #efcb05; ">大</span><span class="sf17b18">）</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">185</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 远处的点会被遮挡</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">标记一下该点以及相邻的5</span><span style="color: #000000; background-color: #efcb05; ">个</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">，后面不再进行特征提取</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">186</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf10b2">10</span><span class="sf11b2">){</span></code></td>
<td class="ln">124</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf10b2">10</span><span class="sf11b2">){</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d37" href="#d37">187</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>&nbsp;</code></td>
<td class="ln">125</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //相邻的两帧间隔深度差大于0.3说明遇到遮挡点了，标记为已经选择过，下次就不<wbr>会再对这些点进行特征点提取了。</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">188</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">depth1</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;- </span><span style="color: #000000; background-color: #efcb05; ">depth2</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; </span><span style="color: #000000; background-color: #efcb05; ">0.</span><span class="sf17b16">3</span><span style="color: #000000; background-color: #efcb05; ">){</span>&nbsp;</code></td>
<td class="ln">126</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">depth1</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;- </span><span style="color: #000000; background-color: #efcb05; ">depth2</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; </span><span style="color: #000000; background-color: #efcb05; ">0.</span><span class="sf17b16">05</span><span style="color: #000000; background-color: #efcb05; ">){</span><span class="sf17b18">//０.3 这些参数都是经过计算得到的，自己也要好好算算，这个是不是有点大了应该改成0.1<wbr></span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">189</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">5</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">127</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">5</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">190</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">4</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">128</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">4</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">191</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">3</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">129</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">3</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">192</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">2</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">130</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">2</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">193</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">131</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">194</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">132</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d38" href="#d38">195</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">else</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">depth2</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;- </span><span style="color: #000000; background-color: #efcb05; ">depth1</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; </span><span style="color: #000000; background-color: #efcb05; ">0.</span><span class="sf17b16">3</span><span style="color: #000000; background-color: #efcb05; ">){</span></code></td>
<td class="ln">133</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">else</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">depth2</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;- </span><span style="color: #000000; background-color: #efcb05; ">depth1</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; </span><span style="color: #000000; background-color: #efcb05; ">0.</span><span class="sf17b16">05</span><span style="color: #000000; background-color: #efcb05; ">){</span></code></td>
</tr>
<tr>
<td class="ln">196</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">134</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">197</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">2</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">135</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">2</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">198</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">3</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">136</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">3</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">199</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">4</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">137</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">4</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">200</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">5</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">138</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">5</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">201</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">6</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">139</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">6</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">202</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">140</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">203</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">141</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d39" href="#d39">204</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>&nbsp;</code></td>
<td class="ln">142</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">获取</span><span style="color: #000000; background-color: #efcb05; ">当前点</span><span class="sf17b16">相邻之间的深度差</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">205</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">用前后相邻点判断</span><span style="color: #000000; background-color: #efcb05; ">当前点</span><span class="sf17b16">所在平面是否与激光束方向平行</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">206</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">diff1</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">float</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">1<wbr></span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">]));</span></code></td>
<td class="ln">143</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">diff1</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">float</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">-</span><span class="sf10b2">1<wbr></span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">]));</span></code></td>
</tr>
<tr>
<td class="ln">207</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">diff2</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">float</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1<wbr></span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">]));</span></code></td>
<td class="ln">144</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">float</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">diff2</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">float</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">+</span><span class="sf10b2">1<wbr></span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">]));</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d40" href="#d40">208</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">145</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">如果相邻深度都较大，则认为当前点为</span><span style="color: #000000; background-color: #efcb05; ">平行</span><span class="sf17b16">光束，并</span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">为已经选择过</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">209</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">平行</span><span class="sf17b16">则</span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">一下</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">210</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">diff1</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">0.02</span><span class="sf11b2">&nbsp;* </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] &amp;&amp; </span><span class="sf3b2">diff2</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">0.02</span><span class="sf11b2">&nbsp;* </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">])</span></code></td>
<td class="ln">146</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">diff1</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">0.02</span><span class="sf11b2">&nbsp;* </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] &amp;&amp; </span><span class="sf3b2">diff2</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">0.02</span><span class="sf11b2">&nbsp;* </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">])</span></code></td>
</tr>
<tr>
<td class="ln">211</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">147</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">212</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">148</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">213</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">149</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">214</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">150</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d41" href="#d41">215</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/**</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">216</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 点云角点、平面点特征提取</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">217</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 1、遍历扫描线，每根扫描线扫描一周的点云划分为6段，针对每段提取20个角点、不<wbr>限数量的平面点，加入角点集合、平面点集合</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">218</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 2、认为非角点的点都是平面点，加入平面点云集合，最后降采样</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">219</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">220</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">extractFeatures</span><span class="sf11b2">()</span></code></td>
<td class="ln">151</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">extractFeatures</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln">221</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">152</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln">222</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cornerCloud</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">153</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cornerCloud</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">223</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">154</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">224</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">155</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">225</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">surfaceCloudScan</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
<td class="ln">156</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">surfaceCloudScan</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
</tr>
<tr>
<td class="ln">226</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">surfaceCloudScanDS</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
<td class="ln">157</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;::</span><span class="sf3b2">Ptr</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">surfaceCloudScanDS</span><span class="sf11b2">(</span><span class="sf7b2">new</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">pcl</span><span class="sf11b2">::</span><span class="sf3b2">PointCloud</span><span class="sf11b2">&lt;</span><span class="sf3b2">PointType</span><span class="sf11b2">&gt;());</span></code></td>
</tr>
<tr>
<td class="ln">227</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">158</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d42" href="#d42">228</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 遍历扫描线</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">229</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">0</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">N_SCAN</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">++)</span></code></td>
<td class="ln">159</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">0</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf3b2">N_SCAN</span><span class="sf11b2">; </span><span class="sf3b2">i</span><span class="sf11b2">++)</span></code></td>
</tr>
<tr>
<td class="ln">230</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">160</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln">231</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloudScan</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">161</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloudScan</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">232</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">162</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d43" href="#d43">233</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 将一条扫描线扫描一周的点云数据，划分为6段，每段分开提取有限数量的特征，保证特<wbr>征均匀分布</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">234</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">j</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">0</span><span class="sf11b2">; </span><span class="sf3b2">j</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf10b2">6</span><span class="sf11b2">; </span><span class="sf3b2">j</span><span class="sf11b2">++)</span></code></td>
<td class="ln">163</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">j</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">0</span><span class="sf11b2">; </span><span class="sf3b2">j</span><span class="sf11b2">&nbsp;&lt; </span><span class="sf10b2">6</span><span class="sf11b2">; </span><span class="sf3b2">j</span><span class="sf11b2">++)</span></code></td>
</tr>
<tr>
<td class="ln">235</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">164</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d44" href="#d44">236</a></td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 每段点云的起始、结束索引；startRingIndex为扫描线起始第5个激光点<wbr>在一维数组中的索引</span>&nbsp;</code></td>
<td class="ln">165</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">237</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">sp</span><span class="sf11b2">&nbsp;= (</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">startRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * (</span><span class="sf10b2">6</span><span class="sf11b2">&nbsp;- </span><span class="sf3b2">j</span><span class="sf11b2">) + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">endRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * </span><span class="sf3b2">j</span><span class="sf11b2">) / </span><span class="sf10b2">6</span><span class="sf11b2">;</span></code></td>
<td class="ln">166</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">sp</span><span class="sf11b2">&nbsp;= (</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">startRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * (</span><span class="sf10b2">6</span><span class="sf11b2">&nbsp;- </span><span class="sf3b2">j</span><span class="sf11b2">) + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">endRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * </span><span class="sf3b2">j</span><span class="sf11b2">) / </span><span class="sf10b2">6</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">238</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ep</span><span class="sf11b2">&nbsp;= (</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">startRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * (</span><span class="sf10b2">5</span><span class="sf11b2">&nbsp;- </span><span class="sf3b2">j</span><span class="sf11b2">) + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">endRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * (</span><span class="sf3b2">j</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">)) / </span><span class="sf10b2">6</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">167</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ep</span><span class="sf11b2">&nbsp;= (</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">startRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * (</span><span class="sf10b2">5</span><span class="sf11b2">&nbsp;- </span><span class="sf3b2">j</span><span class="sf11b2">) + </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">endRingIndex</span><span class="sf11b2">[</span><span class="sf3b2">i</span><span class="sf11b2">] * (</span><span class="sf3b2">j</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">)) / </span><span class="sf10b2">6</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">239</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">168</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">240</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">sp</span><span class="sf11b2">&nbsp;&gt;= </span><span class="sf3b2">ep</span><span class="sf11b2">)</span></code></td>
<td class="ln">169</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">sp</span><span class="sf11b2">&nbsp;&gt;= </span><span class="sf3b2">ep</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln">241</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">continue</span><span class="sf11b2">;</span></code></td>
<td class="ln">170</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">continue</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">242</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">171</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d45" href="#d45">243</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 按照曲率从小到大排序点云</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">244</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">sort</span><span class="sf11b2">(</span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">.</span><span class="sf8b2">begin</span><span class="sf11b2">()+</span><span class="sf3b2">sp</span><span class="sf11b2">, </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">.</span><span class="sf8b2">begin</span><span class="sf11b2">()+</span><span class="sf3b2">ep</span><span class="sf11b2">, </span><span class="sf8b2">by_value</span><span class="sf11b2">());</span></code></td>
<td class="ln">172</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">sort</span><span class="sf11b2">(</span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">.</span><span class="sf8b2">begin</span><span class="sf11b2">()+</span><span class="sf3b2">sp</span><span class="sf11b2">, </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">.</span><span class="sf8b2">begin</span><span class="sf11b2">()+</span><span class="sf3b2">ep</span><span class="sf11b2">, </span><span class="sf8b2">by_value</span><span class="sf11b2">());</span></code></td>
</tr>
<tr>
<td class="ln">245</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">173</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d46" href="#d46">246</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 按照曲率从大到小遍历 &nbsp;角点</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">247</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">largestPickedNum</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
<td class="ln">174</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">largestPickedNum</span><span class="sf11b2">&nbsp;= </span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">248</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">ep</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;&gt;= </span><span class="sf3b2">sp</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">--)</span></code></td>
<td class="ln">175</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">ep</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;&gt;= </span><span class="sf3b2">sp</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">--)</span></code></td>
</tr>
<tr>
<td class="ln">249</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">176</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d47" href="#d47">250</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 激光点的索引</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">251</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">].</span><span class="sf3b2">ind</span><span class="sf11b2">;</span></code></td>
<td class="ln">177</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">].</span><span class="sf3b2">ind</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d48" href="#d48">252</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">当前激光点还未被处理</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">且</span><span style="color: #000000; background-color: #efcb05; ">曲率</span><span class="sf17b18">大于阈值，则认</span><span style="color: #000000; background-color: #efcb05; ">为</span><span class="sf17b16">是角点</span>&nbsp;</code></td>
<td class="ln">178</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">edgeThreshold为0.1</span><span style="color: #000000; background-color: #efcb05; ">，</span><span class="sf17b16">正圆的</span><span style="color: #000000; background-color: #efcb05; ">曲率</span><span style="color: #000000; background-color: #efcb05; ">为</span><span class="sf17b16">0</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">253</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] == </span><span class="sf10b2">0</span><span class="sf11b2">&nbsp;&amp;&amp; </span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] &gt; </span><span class="sf3b2">edgeThreshold</span><span class="sf11b2">)</span></code></td>
<td class="ln">179</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] == </span><span class="sf10b2">0</span><span class="sf11b2">&nbsp;&amp;&amp; </span><span class="sf3b2">cloudCurvature</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] &gt; </span><span class="sf3b2">edgeThreshold</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln">254</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">180</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d49" href="#d49">255</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 每段只取20个角点，如果单条扫描线扫描一周是1800个点，则划分6段，每段30<wbr>0个点，从中提取20个角点</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">256</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">largestPickedNum</span><span class="sf11b2">++;</span></code></td>
<td class="ln">181</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">largestPickedNum</span><span class="sf11b2">++;</span></code></td>
</tr>
<tr>
<td class="ln">257</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">largestPickedNum</span><span class="sf11b2">&nbsp;&lt;= </span><span class="sf10b2">20</span><span class="sf11b2">){</span></code></td>
<td class="ln">182</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">largestPickedNum</span><span class="sf11b2">&nbsp;&lt;= </span><span class="sf10b2">20</span><span class="sf11b2">){</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d50" href="#d50">258</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 标记为角点</span>&nbsp;</code></td>
<td class="ln">183</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudLabel</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">] = </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">;</span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">标记点的类型，如果判断是</span><span style="color: #000000; background-color: #efcb05; ">角点</span><span class="sf17b16">，就会被标记为１</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">259</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudLabel</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">] = </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">;</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">260</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;加入</span><span style="color: #000000; background-color: #efcb05; ">角点</span><span class="sf17b16">点云</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">261</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cornerCloud</span><span class="sf11b2">-&gt;</span><span class="sf8b2">push_back</span><span class="sf11b2">(</span><span class="sf3b2">extractedCloud</span><span class="sf11b2">-&gt;<wbr></span><span class="sf3b2">points</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">]);</span></code></td>
<td class="ln">184</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cornerCloud</span><span class="sf11b2">-&gt;</span><span class="sf8b2">push_back</span><span class="sf11b2">(</span><span class="sf3b2">extractedCloud</span><span class="sf11b2">-&gt;<wbr></span><span class="sf3b2">points</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">]);</span></code></td>
</tr>
<tr>
<td class="ln">262</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span class="sf7b2">else</span><span class="sf11b2">&nbsp;{</span></code></td>
<td class="ln">185</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } </span><span class="sf7b2">else</span><span class="sf11b2">&nbsp;{</span></code></td>
</tr>
<tr>
<td class="ln">263</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
<td class="ln">186</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">264</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">187</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d51" href="#d51">265</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">188</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b18">防止特征点聚集，将ind及其前后各5个点</span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">，不做特征点提取</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">266</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">已被处理</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">267</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">189</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d52" href="#d52">268</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 同一条扫描线上后5个点标记一下，不再处理，避免特征聚集</span>&nbsp;</code></td>
<td class="ln">190</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&lt;= </span><span class="sf17b16">mask</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">++)</span></code></td>
</tr>
<tr>
<td class="ln">269</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&lt;= </span><span class="sf17b16">5</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">++)</span></code></td>
<td class="ln">191</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span><span class="sf17b18">&nbsp; &nbsp;// 每个点index之间的差值。附近点都是有效点的情况下，相邻点间的索引只差１</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">270</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">271</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
<td class="ln">192</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d53" href="#d53">272</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">columnDiff</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; </span><span style="color: #000000; background-color: #efcb05; ">10</span><span style="color: #000000; background-color: #efcb05; ">)</span>&nbsp;</code></td>
<td class="ln">193</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 附近有无效点，或者是每条线的起点和终点的部分</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">194</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">columnDiff</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt; </span><span style="color: #000000; background-color: #efcb05; ">10</span><span style="color: #000000; background-color: #efcb05; ">)</span><span class="sf17b18">//这个是用来</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">273</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
<td class="ln">195</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">274</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">196</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">275</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">197</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d54" href="#d54">276</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 同一条扫描线上前5个点标记一下，不再处理，避免特征聚集</span>&nbsp;</code></td>
<td class="ln">198</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= -</span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt;= -</span><span class="sf17b16">mask</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">--)</span></code></td>
</tr>
<tr>
<td class="ln">277</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= -</span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt;= -</span><span class="sf17b16">5</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">--)</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">278</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">199</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln">279</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
<td class="ln">200</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
</tr>
<tr>
<td class="ln">280</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">10</span><span class="sf11b2">)</span></code></td>
<td class="ln">201</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">10</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln">281</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
<td class="ln">202</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">282</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">203</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">283</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">204</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">284</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">205</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">285</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">206</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">286</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">207</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d55" href="#d55">287</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 按照曲率从小到大遍历 &nbsp;面点处理</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">288</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">sp</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;&lt;= </span><span class="sf3b2">ep</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">++)</span></code></td>
<td class="ln">208</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">sp</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;&lt;= </span><span class="sf3b2">ep</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">++)</span></code></td>
</tr>
<tr>
<td class="ln">289</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">209</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d56" href="#d56">290</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 激光点的索引</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">291</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">].</span><span class="sf3b2">ind</span><span class="sf11b2">;</span></code></td>
<td class="ln">210</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">cloudSmoothness</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">].</span><span class="sf3b2">ind</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d57" href="#d57">292</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;当前激光点还未被处理，且曲率小于阈值，则认为是平面点</span>&nbsp;</code></td>
<td class="ln">211</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">surfThreshold=0.1</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">293</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">cloudNeighborPicked</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">] == </span><span style="color: #000000; background-color: #efcb05; ">0</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&amp;&amp; </span><span style="color: #000000; background-color: #efcb05; ">cloudCurvature</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">] &lt; </span><span class="sf17b16">surfThreshold</span><span style="color: #000000; background-color: #efcb05; ">)</span>&nbsp;</code></td>
<td class="ln">212</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">if</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; ">cloudNeighborPicked</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">] == </span><span style="color: #000000; background-color: #efcb05; ">0</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&amp;&amp; </span><span style="color: #000000; background-color: #efcb05; ">cloudCurvature</span><span style="color: #000000; background-color: #efcb05; ">[</span><span style="color: #000000; background-color: #efcb05; ">ind</span><span style="color: #000000; background-color: #efcb05; ">] &lt; </span><span class="sf17b16">0</span><span style="color: #000000; background-color: #efcb05; ">)</span><span class="sf17b18">//edgeThreshold 修改为0</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">294</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">213</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d58" href="#d58">295</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">为平</span><span style="color: #000000; background-color: #efcb05; ">面点</span>&nbsp;</code></td>
<td class="ln">214</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">特征点点</span><span style="color: #000000; background-color: #efcb05; ">标记</span><span class="sf17b16">，如果是</span><span style="color: #000000; background-color: #efcb05; ">面点</span><span class="sf17b18">，就会给标记为-1,标记完成后，表示特征点不在提取<wbr></span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">296</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudLabel</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] = -</span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">215</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudLabel</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] = -</span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d59" href="#d59">297</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 标记已被处理</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">298</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">216</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d60" href="#d60">299</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">217</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span style="color: #000000; background-color: #efcb05; ">同</span><span class="sf17b16">样的为防止特征点聚集，将ind及其前</span><span style="color: #000000; background-color: #efcb05; ">后</span><span class="sf17b18">各</span><span style="color: #000000; background-color: #efcb05; ">5个点标记</span><span style="color: #000000; background-color: #efcb05; ">，不</span><span class="sf17b16">做</span><span style="color: #000000; background-color: #efcb05; ">特征</span><span class="sf17b16">点提取</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">300</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b18">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">同</span><span class="sf17b16">一条扫描线上</span><span style="color: #000000; background-color: #efcb05; ">后</span><span style="color: #000000; background-color: #efcb05; ">5个点标记</span><span class="sf17b18">一下</span><span style="color: #000000; background-color: #efcb05; ">，不</span><span class="sf17b16">再处理，避免</span><span style="color: #000000; background-color: #efcb05; ">特征</span><span class="sf17b16">聚集</span>&nbsp;</code></td>
<td class="ln">218</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&lt;= </span><span class="sf17b16">mask</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">++) {</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">301</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&lt;= </span><span class="sf17b16">5</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">++) {</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">302</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">303</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
<td class="ln">219</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;- </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
</tr>
<tr>
<td class="ln">304</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">10</span><span class="sf11b2">)</span></code></td>
<td class="ln">220</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">10</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln">305</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
<td class="ln">221</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d61" href="#d61">306</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">307</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">222</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">308</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">223</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d62" href="#d62">309</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf17b18">// 同一条扫描线上前5个点标记一下，不再处理，避免特征聚集</span>&nbsp;</code></td>
<td class="ln">224</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= -</span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt;= -</span><span class="sf17b16">mask</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">--) {</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">310</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">for</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;(</span><span style="color: #000000; background-color: #efcb05; font-weight: bold; ">int</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= -</span><span style="color: #000000; background-color: #efcb05; ">1</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;&gt;= -</span><span class="sf17b16">5</span><span style="color: #000000; background-color: #efcb05; ">; </span><span style="color: #000000; background-color: #efcb05; ">l</span><span style="color: #000000; background-color: #efcb05; ">--) {</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">311</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">312</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
<td class="ln">225</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">std</span><span class="sf11b2">::</span><span class="sf8b2">abs</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] - </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">&nbsp;+ </span><span class="sf10b2">1</span><span class="sf11b2">]));</span></code></td>
</tr>
<tr>
<td class="ln">313</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">10</span><span class="sf11b2">)</span></code></td>
<td class="ln">226</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">columnDiff</span><span class="sf11b2">&nbsp;&gt; </span><span class="sf10b2">10</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln">314</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
<td class="ln">227</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">break</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d63" href="#d63">315</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">316</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
<td class="ln">228</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudNeighborPicked</span><span class="sf11b2">[</span><span class="sf3b2">ind</span><span class="sf11b2">&nbsp;+ </span><span class="sf3b2">l</span><span class="sf11b2">] = </span><span class="sf10b2">1</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">317</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">229</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">318</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">230</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">319</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">231</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d64" href="#d64">320</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">232</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">根据标记获取</span><span style="color: #000000; background-color: #efcb05; ">平面点</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">321</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//</span><span class="sf17b16">&nbsp;</span><span style="color: #000000; background-color: #efcb05; ">平面点</span><span class="sf17b18">和未被处理的点，都认为是平面点，加入平面点云集合</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">322</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">sp</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;&lt;= </span><span class="sf3b2">ep</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">++)</span></code></td>
<td class="ln">233</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">for</span><span class="sf11b2">&nbsp;(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;= </span><span class="sf3b2">sp</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">&nbsp;&lt;= </span><span class="sf3b2">ep</span><span class="sf11b2">; </span><span class="sf3b2">k</span><span class="sf11b2">++)</span></code></td>
</tr>
<tr>
<td class="ln">323</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
<td class="ln">234</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln">324</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">cloudLabel</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">] &lt;= </span><span class="sf10b2">0</span><span class="sf11b2">){</span></code></td>
<td class="ln">235</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf7b2">if</span><span class="sf11b2">&nbsp;(</span><span class="sf3b2">cloudLabel</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">] &lt;= </span><span class="sf10b2">0</span><span class="sf11b2">){</span></code></td>
</tr>
<tr>
<td class="ln">325</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloudScan</span><span class="sf11b2">-&gt;</span><span class="sf8b2">push_back</span><span class="sf11b2">(</span><span class="sf3b2">extractedCl<wbr>oud</span><span class="sf11b2">-&gt;</span><span class="sf3b2">points</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">]);</span></code></td>
<td class="ln">236</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloudScan</span><span class="sf11b2">-&gt;</span><span class="sf8b2">push_back</span><span class="sf11b2">(</span><span class="sf3b2">extractedCl<wbr>oud</span><span class="sf11b2">-&gt;</span><span class="sf3b2">points</span><span class="sf11b2">[</span><span class="sf3b2">k</span><span class="sf11b2">]);</span></code></td>
</tr>
<tr>
<td class="ln">326</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">237</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">327</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">238</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">328</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">239</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d65" href="#d65">329</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln">240</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">330</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 平面点云降采样</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">331</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloudScanDS</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">241</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">surfaceCloudScanDS</span><span class="sf11b2">-&gt;</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d66" href="#d66">332</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">downSizeFilter</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">setInputCloud</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">surfaceClo<wbr>udScan</span><span style="color: #000000; background-color: #efcb05; ">);</span>&nbsp;</code></td>
<td class="ln">242</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">downSizeFilter</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">setInputCloud</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">surfaceClo<wbr>udScan</span><span style="color: #000000; background-color: #efcb05; ">);</span><span class="sf17b18">//20cm,面特征降采样</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">333</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">downSizeFilter</span><span class="sf11b2">.</span><span class="sf8b2">filter</span><span class="sf11b2">(*</span><span class="sf3b2">surfaceCloudScan<wbr>DS</span><span class="sf11b2">);</span></code></td>
<td class="ln">243</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">downSizeFilter</span><span class="sf11b2">.</span><span class="sf8b2">filter</span><span class="sf11b2">(*</span><span class="sf3b2">surfaceCloudScan<wbr>DS</span><span class="sf11b2">);</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d67" href="#d67">334</a></td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">335</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// 加入平面点云集合</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">336</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">&nbsp;+= *</span><span class="sf3b2">surfaceCloudScanDS</span><span class="sf11b2">;</span></code></td>
<td class="ln">244</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *</span><span class="sf3b2">surfaceCloud</span><span class="sf11b2">&nbsp;+= *</span><span class="sf3b2">surfaceCloudScanDS</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">337</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
<td class="ln">245</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d68" href="#d68">.</a></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">246</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">//ROS_INFO("featureExtration 角特征点数量%d,平面特征点数量%d",cornerCloud-&gt;size()<wbr>,surfaceCloud-&gt;size());</span></code></td>
</tr>
<tr>
<td class="ln">338</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">247</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">339</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">248</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d69" href="#d69">340</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/**</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">341</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 清理</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">342</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">343</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">freeCloudInfoMemory</span><span class="sf11b2">()</span></code></td>
<td class="ln">249</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">freeCloudInfoMemory</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln">344</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">250</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln">345</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">startRingIndex</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">251</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">startRingIndex</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">346</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">endRingIndex</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">252</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">endRingIndex</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">347</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">253</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointColInd</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">348</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
<td class="ln">254</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">cloudInfo</span><span class="sf11b2">.</span><span class="sf3b2">pointRange</span><span class="sf11b2">.</span><span class="sf8b2">clear</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">349</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">255</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">350</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">256</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d70" href="#d70">351</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">/**</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">352</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp;* 发布角点、面点点云，发布带特征点云数据的当前激光帧点云信息</span></code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">353</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; */</span>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">354</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">publishFeatureCloud</span><span class="sf11b2">()</span></code></td>
<td class="ln">257</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">void</span><span class="sf11b2">&nbsp;</span><span class="sf8b2">publishFeatureCloud</span><span class="sf11b2">()</span></code></td>
</tr>
<tr>
<td class="ln">355</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
<td class="ln">258</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; {</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d71" href="#d71">356</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">清理</span>&nbsp;</code></td>
<td class="ln">259</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">free cloud info memory</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">357</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">freeCloudInfoMemory</span><span class="sf11b2">();</span></code></td>
<td class="ln">260</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf8b2">freeCloudInfoMemory</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d72" href="#d72">358</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">发布</span><span style="color: #000000; background-color: #efcb05; ">角</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">、</span><span style="color: #000000; background-color: #efcb05; ">面</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">点云，用于rviz展示</span>&nbsp;</code></td>
<td class="ln">261</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">save newly extracted features</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">359</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">cloud_corner</span><span style="color: #000000; background-color: #efcb05; ">&nbsp; = </span><span style="color: #000000; background-color: #efcb05; ">publishCloud</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b18">&amp;</span><span style="color: #000000; background-color: #efcb05; ">pubCornerPoints</span><span style="color: #000000; background-color: #efcb05; ">, &nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cornerCloud</span><span style="color: #000000; background-color: #efcb05; ">, &nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cloudHeader</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">stamp</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">lidarFrame</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
<td class="ln">262</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; //注对于单线激光雷达来说，线特征就是点特征，面特征就是线特征。</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">360</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">cloud_surface</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">publishCloud</span><span style="color: #000000; background-color: #efcb05; ">(</span><span class="sf17b18">&amp;</span><span style="color: #000000; background-color: #efcb05; ">pubSurfacePoints</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">surfaceCloud</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">cloudHeader</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">stamp</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">lidarFrame</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
<td class="ln">263</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; &nbsp; &nbsp; //ROS_INFO("publishFeatureCloud </span><span style="color: #000000; background-color: #efcb05; ">角</span><span class="sf17b18">特征</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">数量:%d,</span><span style="color: #000000; background-color: #efcb05; ">面</span><span class="sf17b18">特征</span><span style="color: #000000; background-color: #efcb05; ">点</span><span class="sf17b16">数量:%d",cornerCloud-&gt;size(<wbr>),surfaceCloud-&gt;size());</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">361</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">发布当前激光帧点云信息，加入了角点、面点点云数据，发布给</span><span style="color: #000000; background-color: #efcb05; ">mapOptimiza<wbr>tion</span></code></td>
<td class="ln">264</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">cloud_corner</span><span style="color: #000000; background-color: #efcb05; ">&nbsp; = </span><span style="color: #000000; background-color: #efcb05; ">publishCloud</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">pubCornerPoints</span><span style="color: #000000; background-color: #efcb05; ">, &nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cornerCloud</span><span style="color: #000000; background-color: #efcb05; ">, &nbsp;</span><span style="color: #000000; background-color: #efcb05; ">cloudHeader</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">stamp</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">lidarFrame</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">265</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">cloudInfo</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">cloud_surface</span><span style="color: #000000; background-color: #efcb05; ">&nbsp;= </span><span style="color: #000000; background-color: #efcb05; ">publishCloud</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">pubSurfacePoints</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">surfaceCloud</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">cloudHeader</span><span style="color: #000000; background-color: #efcb05; ">.</span><span style="color: #000000; background-color: #efcb05; ">stamp</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">lidarFrame</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">266</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">// </span><span class="sf17b16">publish to </span><span style="color: #000000; background-color: #efcb05; ">mapOptimization</span></code></td>
</tr>
<tr>
<td class="ln">362</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pubLaserCloudInfo</span><span class="sf11b2">.</span><span class="sf8b2">publish</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">);</span></code></td>
<td class="ln">267</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="sf3b2">pubLaserCloudInfo</span><span class="sf11b2">.</span><span class="sf8b2">publish</span><span class="sf11b2">(</span><span class="sf3b2">cloudInfo</span><span class="sf11b2">);</span></code></td>
</tr>
<tr>
<td class="ln">363</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
<td class="ln">268</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; }</span></code></td>
</tr>
<tr>
<td class="ln">364</td><td class="sf3b2"><code><span class="sf11b2">};</span></code></td>
<td class="ln">269</td><td class="sf3b2"><code><span class="sf11b2">};</span></code></td>
</tr>
<tr>
<td class="ln">365</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">270</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">366</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">271</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">367</td><td class="sf3b2"><code><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">main</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">argc</span><span class="sf11b2">, </span><span class="sf7b2">char</span><span class="sf11b2">** </span><span class="sf3b2">argv</span><span class="sf11b2">)</span></code></td>
<td class="ln">272</td><td class="sf3b2"><code><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf7b2">main</span><span class="sf11b2">(</span><span class="sf7b2">int</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">argc</span><span class="sf11b2">, </span><span class="sf7b2">char</span><span class="sf11b2">** </span><span class="sf3b2">argv</span><span class="sf11b2">)</span></code></td>
</tr>
<tr>
<td class="ln">368</td><td class="sf3b2"><code><span class="sf11b2">{</span></code></td>
<td class="ln">273</td><td class="sf3b2"><code><span class="sf11b2">{</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d73" href="#d73">369</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">ros</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">init</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">argc</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">argv</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">"</span><span style="color: #000000; background-color: #efcb05; ">lio_sam"</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
<td class="ln">274</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">setlocale(LC_CTYPE,"zh_CN.utf8");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
<td class="ln">275</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b18">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">ros</span><span style="color: #000000; background-color: #efcb05; ">::</span><span style="color: #000000; background-color: #efcb05; ">init</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">argc</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">argv</span><span style="color: #000000; background-color: #efcb05; ">, </span><span style="color: #000000; background-color: #efcb05; ">"</span><span class="sf17b18">s</span><span style="color: #000000; background-color: #efcb05; ">lio_sam"</span><span style="color: #000000; background-color: #efcb05; ">);</span></code></td>
</tr>
<tr>
<td class="ln">370</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">276</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">371</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">FeatureExtraction</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">FE</span><span class="sf11b2">;</span></code></td>
<td class="ln">277</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">FeatureExtraction</span><span class="sf11b2">&nbsp;</span><span class="sf3b2">FE</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln">372</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">278</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln"><a name="d74" href="#d74">373</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span style="color: #000000; background-color: #efcb05; ">ROS_INFO</span><span style="color: #000000; background-color: #efcb05; ">(</span><span style="color: #000000; background-color: #efcb05; ">"\033[1;32m----&gt; Feature Extraction Started</span><span style="color: #000000; background-color: #efcb05; ">.\033[0m"</span><span style="color: #000000; background-color: #efcb05; ">);</span>&nbsp;</code></td>
<td class="ln">279</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">&nbsp; &nbsp; </span><span class="sf17b18">//</span><span style="color: #000000; background-color: #efcb05; ">ROS_INFO("\033[1;32m----&gt; Feature Extraction Started</span><span class="sf17b18">------------</span><span style="color: #000000; background-color: #efcb05; ">.\033[0m");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">374</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp;</span>&nbsp;</code></td>
<td class="ln">280</td><td style="color: #000000; background-color: #efcb05; "><code><span class="sf17b16">&nbsp; &nbsp; ROS_INFO("\033[1;32m----&gt;启动feature提取.\0<wbr>33[0m");</span>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">375</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf8b2">spin</span><span class="sf11b2">();</span></code></td>
<td class="ln">281</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf3b2">ros</span><span class="sf11b2">::</span><span class="sf8b2">spin</span><span class="sf11b2">();</span></code></td>
</tr>
<tr>
<td class="ln">376</td><td class="sf3b2"><code>&nbsp;</code></td>
<td class="ln">282</td><td class="sf3b2"><code>&nbsp;</code></td>
</tr>
<tr>
<td class="ln">377</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
<td class="ln">283</td><td class="sf3b2"><code><span class="sf11b2">&nbsp; &nbsp; </span><span class="sf7b2">return</span><span class="sf11b2">&nbsp;</span><span class="sf10b2">0</span><span class="sf11b2">;</span></code></td>
</tr>
<tr>
<td class="ln"><a name="d75" href="#d75">378</a></td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">}</span>&nbsp;</code></td>
<td class="ln">284</td><td style="color: #000000; background-color: #efcb05; "><code><span style="color: #000000; background-color: #efcb05; ">}</span></code></td>
</tr>
<tr>
<td class="ln">379</td><td style="color: #000000; background-color: #efcb05; "><code>&nbsp;</code></td>
<td class="ln"></td><td style="color: #000000; background-color: #c0c0c0; "><code>&nbsp;</code></td>
</tr>
</tbody>
</table>
</body>
</html>
